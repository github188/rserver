/*****************************************************************************/
/*                                                                           */
/*           系统名        ：        内蒙气象局后台服务                      */
/*           客户名        ：        内蒙气象局                              */
/*           机能名        ：        日志文件处理机能                        */
/*           程序名        ：        Mutex.cpp                               */
/*                                                                           */
/*****************************************************************************/
/*                                                                           */
/*                VERSION    DATE      BY      CHANGE/COMMENT                */
/*---------------------------------------------------------------------------*/
/*                V1.00      09-11-11          Create                        */
/*                                                                           */
/*****************************************************************************/

#include "Mutex.h"

/*****************************************************************************
    处理名        ：  构造函数
    函数名        ：  CMutex()
    处理说明      ：  本函数用于在同一个线程中构造相互排斥的2个或多个对象实例。
******************************************************************************/
CMutex::CMutex(){
    pthread_mutex_init(&m_sMutex, NULL);
}

/*****************************************************************************
    处理名        ：  析构函数
    函数名        ：  ~CMutex()
    处理说明      ：  本函数用于释放对象关系资源。
******************************************************************************/
CMutex::~CMutex(){
    pthread_mutex_destroy(&m_sMutex);
}

/*****************************************************************************
    处理名        ：  互斥类锁定
    函数名        ：  Lock()
    处理说明      ：  本函数用于锁定指定的对象关系资源。
******************************************************************************/
void CMutex::Lock(){
    pthread_mutex_lock(&m_sMutex);
}

/*****************************************************************************
    处理名        ：  互斥类锁定状态解除
    函数名        ：  UnLock()
    处理说明      ：  本函数用于对锁定对象关系资源进行解除锁定。
******************************************************************************/
void CMutex::UnLock(){
    pthread_mutex_unlock(&m_sMutex);
}

/*****************************************************************************
    处理名        ：  互斥类锁定状态判断
    函数名        ：  TryLock() int
    戻り値        ：  =  0   ：锁定成功
                      <> 0   ：互斥锁定
    处理说明      ：  本函数用于判断对象关系资源是否已经处于锁定状态。
******************************************************************************/
void CMutex::TryLock(){
    pthread_mutex_trylock(&m_sMutex);
}

/*****************************************************************************
    End
*****************************************************************************/
